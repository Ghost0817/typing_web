function init(e){function t(e){if(1!=_isFinished){var t='<div class="line">',l=e.length;T=0;for(var s=0;l>s;s++){for(var o=0;o<e[s].length;o++)m>s&&(t+=in_array(s+","+o,u)?'<span class="error">'+(" "==e[s][o]?"&nbsp;":e[s][o])+"</span>":'<span class="dis">'+(" "==e[s][o]?"&nbsp;":e[s][o])+"</span>"),s==m&&k>o&&(t+=in_array(s+","+o,u)?'<span class="error">'+(" "==e[s][o]?"&nbsp;":e[s][o])+"</span>":'<span class="dis">'+(" "==e[s][o]?"&nbsp;":e[s][o])+"</span>"),s!=m||k>o||(t+=k==o&&m==s?'<span class="active">'+(" "==e[s][o]?"&nbsp;":e[s][o])+"</span>":"<span>"+(" "==e[s][o]?"&nbsp;":e[s][o])+"</span>"),s>m&&(t+="<span>"+(" "==e[s][o]?"&nbsp;":e[s][o])+"</span>");T+=e[s].length,t+='</div><div class="line">'}if(t+="</div>","Keyboard"==layout)for(var s=0;s<_mykb.length;s++)_mykb[s]["char"]==e[m][k]&&(y.style.display=_mykb[s].currentstyledisplay,y.style.top=_mykb[s].currentstyletop,y.style.left=_mykb[s].currentstyleleft,p.style.display=_mykb[s].shiftbttnstyledisplay,x.style.display=_mykb[s].righthandstyledisplay,x.style.top=_mykb[s].righthandstyletop,x.style.left=_mykb[s].righthandstyleleft,p.style.top=_mykb[s].shiftbttnstyletop,p.style.left=_mykb[s].shiftbttnstyleleft,n.style.display=_mykb[s].chiesenonestyledisplay,i.style.display=_mykb[s].spacestyledisplay,a.style.display=_mykb[s].lefthandstyledisplay,a.style.top=_mykb[s].lefthandstyletop,a.style.left=_mykb[s].lefthandstyleleft);if("Keypad"==layout)switch(e[m][k]){case"0":y.style.display="block",y.style.top="132px",y.style.left="4px",y.style.height="26px",y.style.width="58px",x.style.display="block",x.style.top="50px",x.style.left="25px";break;case"1":y.style.display="block",y.style.top="100px",y.style.left="4px",y.style.height="26px",y.style.width="26px",x.style.display="block",x.style.top="12px",x.style.left="46px";break;case"2":y.style.display="block",y.style.top="100px",y.style.left="36px",y.style.height="26px",y.style.width="26px",x.style.display="block",x.style.top="2px",x.style.left="68px";break;case"3":y.style.display="block",y.style.top="100px",y.style.left="68px",y.style.height="26px",y.style.width="26px",x.style.display="block",x.style.top="7px",x.style.left="84px";break;case"4":y.style.display="block",y.style.top="68px",y.style.left="4px",y.style.height="26px",y.style.width="26px",x.style.display="block",x.style.top="12px",x.style.left="46px";break;case"5":y.style.display="block",y.style.top="68px",y.style.left="36px",y.style.height="26px",y.style.width="26px",x.style.display="block",x.style.top="2px",x.style.left="68px";break;case"6":y.style.display="block",y.style.top="68px",y.style.left="68px",y.style.height="26px",y.style.width="26px",x.style.display="block",x.style.top="7px",x.style.left="84px";break;case"7":y.style.display="block",y.style.top="36px",y.style.left="4px",y.style.height="26px",y.style.width="26px",x.style.display="block",x.style.top="12px",x.style.left="46px";break;case"8":y.style.display="block",y.style.top="36px",y.style.left="36px",y.style.height="26px",y.style.width="26px",x.style.display="block",x.style.top="2px",x.style.left="68px";break;case"9":y.style.display="block",y.style.top="36px",y.style.left="68px",y.style.height="26px",y.style.width="26px",x.style.display="block",x.style.top="7px",x.style.left="84px";break;case"-":y.style.display="block",y.style.top="5px",y.style.left="100px",y.style.height="26px",y.style.width="26px",x.style.display="block",x.style.top="22px",x.style.left="105px";break;case"+":y.style.display="block",y.style.top="36px",y.style.left="100px",y.style.height="58px",y.style.width="26px",x.style.display="block",x.style.top="22px",x.style.left="105px";break;case"/":y.style.display="block",y.style.top="4px",y.style.left="36px",y.style.height="26px",y.style.width="26px",x.style.display="block",x.style.top="2px",x.style.left="68px";break;case"*":y.style.display="block",y.style.top="4px",y.style.left="68px",y.style.height="26px",y.style.width="26px",x.style.display="block",x.style.top="7px",x.style.left="84px";break;case".":y.style.display="block",y.style.top="132px",y.style.left="68px",y.style.height="26px",y.style.width="26px",x.style.display="block",x.style.top="7px",x.style.left="84px";break;case" ":y.style.display="block",y.style.top="100px",y.style.left="100px",y.style.height="58px",y.style.width="26px",x.style.display="block",x.style.top="22px",x.style.left="105px"}return t}}var l,s,y,p,n,i,a,o,r,d,c,h,x,f={text:[],lang:"mongolian",onfinish:{}},b="",m=0,k=0,g="mongolian",u=[],v=[],_=0,w=0,I=0,C=0,T=0,E=!1,B=0,L=!1,H=!1;if(f=merge(f,e),b=f.text.split("\n"),I=f.text.split("\n").length,C=f.text.split("\n")[I-1].length,g=e.lang,l=document.getElementById(e.render.renderTo),y=document.getElementById(e.render.currentbttn),p=document.getElementById(e.render.shiftbttn),n=document.getElementById(e.render.chiesenone),i=document.getElementById(e.render.space),a=document.getElementById(e.render.lefthand),x=document.getElementById(e.render.righthand),o=document.getElementById(e.render.timer),r=document.getElementById(e.render.wpm),c=document.getElementById(e.render.procent),d=e.PermissiblePercent,layout=e.layout,w=e.examtime,_isFinished=!1,s=720,0==w)o.innerHTML=_rtime;else{var M=parseInt((w-B)/60),F=(w-B)%60;o.innerHTML=(1==(""+M).length?"0"+M:M)+":"+(1==(""+F).length?"0"+F:F),_rtime=(1==(""+M).length?"0"+M:M)+":"+(1==(""+F).length?"0"+F:F)}l.innerHTML=t(b),window.onfocus=function(){"block"==$("* #current").css("display")&&($("* #current").addClass("moving"),setTimeout(function(){$("#current").removeClass("moving")},1e3)),"block"==$("* #shiftbttn").css("display")&&($("* #shiftbttn").addClass("moving"),setTimeout(function(){$("#shiftbttn").removeClass("moving")},1e3)),"block"==$("* #slash").css("display")&&($("* #slash").addClass("moving"),setTimeout(function(){$("#slash").removeClass("moving")},1e3)),"block"==$("* #spacebttn").css("display")&&($("* #spacebttn").addClass("moving"),setTimeout(function(){$("#spacebttn").removeClass("moving")},1e3))},window.onkeydown=function(e){if(8==e.keyCode){if(m>=0){if(k>0){k-=1;for(var s=0;s<u.length;s++)if(u[s]==m+","+k){u.splice(s,1);break}}else m>0&&(m-=1,k=b[m].length-1);l.innerHTML=t(b)}return-1==navigator.userAgent.toLowerCase().indexOf("msie")?e.stopPropagation():(e.cancelBubble=!0,e.returnValue=!1),!1}},eventUtility.addEvent(document,"keypress",function(e){if(1!=H){var s=eventUtility.getCharCode(e);if(13==s&&(s=32),m+1==I&&k+1==C&&(clearInterval(h),f.onfinish(),_isFinished=!0,H=!0,d>_procent&&(_isFinished=!1)),"8"==s);else if(String.fromCharCode(s)==b[m][k])_correcthit+=1,b[m].length==k+1?(k=0,m+=1):k+=1,L=!1,l.innerHTML=t(b),0==E&&(E=!0,h=setInterval(function(){if(B+=1,0==w){var e=parseInt(B/60),t=B%60;o.innerHTML=(1==(""+e).length?"0"+e:e)+":"+(1==(""+t).length?"0"+t:t),_rtime=(1==(""+e).length?"0"+e:e)+":"+(1==(""+t).length?"0"+t:t)}else{var e=parseInt((w-B)/60),t=(w-B)%60;o.innerHTML=(1==(""+e).length?"0"+e:e)+":"+(1==(""+t).length?"0"+t:t),_rtime=(1==(""+e).length?"0"+e:e)+":"+(1==(""+t).length?"0"+t:t)}var l=B/60,s=T/5;s/=l,_wpm=s;var y=s-_/l;_netwpm=parseInt(y),r.innerHTML=parseInt(y),_procent=parseInt(y/s*100),c.innerHTML=parseInt(100*(_correcthit-_)/_correcthit)+"%",_time=B,0!=w&&w==B&&(_isFinished=!1,clearInterval(h),eventUtility.removeEvent(document,"keypress",this),f.onfinish())},1e3));else if(_mp3.play(),1==E&&0==L){if(u.push(m+","+k)," "!=b[m][k]){var y=!1,p=0;for(p=0;p<v.length;p++)v[p]==b[m][k]&&(y=!0);0==y&&v.push(b[m][k])}b[m].length==k+1?(k=0,m+=1):k+=1,_+=1,_mistakehit+=1,L=!0,l.innerHTML=t(b)}_erroredChar=v}})}function in_array(e,t,l){var s="",y=!!l;if(y){for(s in t)if(t[s]===e)return!0}else for(s in t)if(t[s]==e)return!0;return!1}